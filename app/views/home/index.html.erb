<div class="flex flex-col">
  <h1 class="text-4xl font-bold text-gray-600 mb-6">Today</h1>

  <div class="mb-5">
    <ul>
      <% @tasks.each do |task| %>
        <li class="flex items-center gap-2 mb-2">
          <%= form_with model: task, url: task_path(task), method: :patch, local: true do |f| %>
          <div class="flex flex-row">
            <%= f.check_box :status, { checked: task.status == "done", onchange: "this.form.submit()" }, "done", "pending" %>
            <div class="flex flex-col ml-2">
              <%= f.label task.title, class: task.status == "done" ? "line-through text-gray-500" : "" %>
              <%= f.label task.description.present? ? task.description : "No description", class: "text-gray-400" %>
            </div>
          </div>
          <% end %>

          <%= button_to task_path(task), method: :delete, class: "text-red-600 ml-2" do %>
              <i class="fa-solid fa-trash"></i>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>

  <div>
    <%= form_with model: @task, url: tasks_path, local: true do |f| %>
      <%= f.text_field :title, placeholder: "Add a task..." %>
      <%= f.text_field :description, placeholder: "Add a description" %>
      <%= f.hidden_field :status, value: "pending" %>
      <%= f.submit "Add" %>
    <% end %>
  </div>
</div>
